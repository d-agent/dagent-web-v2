(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[965],{94785:function(e,t,s){Promise.resolve().then(s.bind(s,83832))},83832:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(57437),i=s(2265),n=s(40521),r=s(48614),o=s(32489),l=s(51817),c=s(99397),d=s(54001),x=s(78867),u=s(71533),h=s(15868),m=s(95468),p=s(18930),y=s(47625),g=s(7476),f=s(56940),b=s(97059),v=s(62994),j=s(8147),w=s(23263),k=s(60667);function N(){let[e,t]=(0,i.useState)(!1),[s,N]=(0,i.useState)(null),[A,_]=(0,i.useState)(""),{data:I,isLoading:D}=(0,k.s6)(),Z=(0,k.us)(),K=(0,k.E3)(),C=(null==I?void 0:I.data)||[],S=!D&&0===C.length,P=async()=>{if(A.trim())try{await Z.mutateAsync(A.trim()),_(""),t(!1)}catch(e){console.error("Failed to create API key:",e)}},q=async e=>{if(confirm("Are you sure you want to delete this API key?"))try{await K.mutateAsync(e)}catch(e){console.error("Failed to delete API key:",e)}};return(0,a.jsxs)("div",{className:"pt-32 pb-20 px-6 max-w-7xl mx-auto min-h-screen w-full",onClick:()=>N(null),children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"API Keys"}),(0,a.jsxs)("div",{className:"bg-surface border border-white/10 rounded-2xl p-6 mb-8 w-full shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Usage Overview (Requests)"}),(0,a.jsxs)("select",{className:"bg-black border border-white/10 rounded px-3 py-1 text-xs outline-none",children:[(0,a.jsx)("option",{children:"Last 7 Days"}),(0,a.jsx)("option",{children:"Last 30 Days"})]})]}),(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(y.h,{width:"100%",height:"100%",children:(0,a.jsxs)(g.T,{data:[{name:"Mon",reqs:4e3},{name:"Tue",reqs:3e3},{name:"Wed",reqs:2e3},{name:"Thu",reqs:2780},{name:"Fri",reqs:1890},{name:"Sat",reqs:2390},{name:"Sun",reqs:3490}],children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorReqs",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#00FF94",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#00FF94",stopOpacity:0})]})}),(0,a.jsx)(f.q,{strokeDasharray:"3 3",stroke:"#333",vertical:!1}),(0,a.jsx)(b.K,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),(0,a.jsx)(v.B,{stroke:"#666",tick:{fontSize:12}}),(0,a.jsx)(j.u,{contentStyle:{backgroundColor:"#111",borderColor:"#333",color:"#fff"},itemStyle:{color:"#00FF94"}}),(0,a.jsx)(w.u,{type:"monotone",dataKey:"reqs",stroke:"#00FF94",fillOpacity:1,fill:"url(#colorReqs)"})]})})})]}),e?(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full bg-surface border border-white/10 rounded-2xl p-8 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"font-bold text-xl",children:"Create New API Key"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(o.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 font-mono mb-2 block",children:"KEY NAME"}),(0,a.jsx)("input",{type:"text",value:A,onChange:e=>_(e.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg p-3 text-sm focus:border-primary outline-none text-white",placeholder:"e.g. Production Mobile App"})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{onClick:()=>{t(!1),_("")},className:"flex-1 py-3 rounded-lg border border-white/10 hover:bg-white/5 transition-colors text-sm font-bold",children:"Cancel"}),(0,a.jsx)("button",{onClick:P,disabled:!A.trim()||Z.isPending,className:"flex-1 bg-primary text-black font-bold py-3 rounded-lg hover:bg-primaryDim transition-colors text-sm disabled:opacity-50 flex items-center justify-center gap-2",children:Z.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{size:16,className:"animate-spin"}),"Creating..."]}):"Generate Secret Key"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6 w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"font-bold text-xl",children:"Active Keys"}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 bg-primary text-black px-4 py-2 rounded-lg font-bold text-sm hover:bg-primaryDim transition-colors",children:[(0,a.jsx)(c.Z,{size:16})," ",(0,a.jsx)("span",{children:"Create New Key"})]})]}),D?(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading API keys..."})}):S?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"No API keys available"}),(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Create your first API key to get started."})]}):(0,a.jsx)("div",{className:"space-y-3",children:C.map(e=>(0,a.jsxs)("div",{className:"bg-surface border border-white/10 rounded-xl p-6 flex flex-col md:flex-row items-center justify-between hover:border-white/20 transition-colors group w-full shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-surfaceHighlight border border-white/5 rounded-xl flex items-center justify-center text-primary shadow-[0_0_15px_rgba(0,255,148,0.1)]",children:(0,a.jsx)(d.Z,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-lg mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-mono text-xs text-gray-400 bg-white/5 px-2 py-1 rounded border border-white/5",children:e.key?"".concat(e.key.substring(0,8),"..."):e.prefix||"sk-..."}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["• Created ",e.createdAt||e.createdAt||"Recently"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mt-4 md:mt-0 w-full md:w-auto justify-between md:justify-end",children:[(0,a.jsxs)("div",{className:"text-right hidden md:block",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Last Used"}),(0,a.jsx)("div",{className:"text-sm font-mono text-gray-300",children:e.lastUsed||"Never"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs font-bold transition-colors",children:[(0,a.jsx)(x.Z,{size:14})," ",(0,a.jsx)("span",{children:"Copy"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),N(s===e.id?null:e.id)},className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:(0,a.jsx)(u.Z,{size:20})}),(0,a.jsx)(r.M,{children:s===e.id&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute right-0 top-full mt-2 w-48 bg-[#0A0A0A] border border-white/10 rounded-xl shadow-2xl overflow-hidden z-20 origin-top-right",children:[(0,a.jsxs)("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-300 hover:bg-white/5 hover:text-white flex items-center gap-2",children:[(0,a.jsx)(h.Z,{size:16})," Edit Permissions"]}),(0,a.jsxs)("button",{className:"w-full text-left px-4 py-3 text-sm text-yellow-500 hover:bg-yellow-500/10 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{size:16})," Revoke Key"]}),(0,a.jsx)("div",{className:"h-[1px] bg-white/5 mx-2 my-1"}),(0,a.jsxs)("button",{onClick:()=>q(e.id),disabled:K.isPending,className:"w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-2 disabled:opacity-50",children:[K.isPending?(0,a.jsx)(l.Z,{size:16,className:"animate-spin"}):(0,a.jsx)(p.Z,{size:16}),"Delete Permanently"]})]})})]})]})]})]},e.id))})]})]})}},60667:function(e,t,s){"use strict";s.d(t,{E3:function(){return c},s6:function(){return o},us:function(){return l}});var a=s(11713),i=s(29827),n=s(21770),r=s(54989);let o=()=>(0,a.a)({queryKey:["apiKeys"],queryFn:()=>r.Z.apiKeys.getAllApiKeys()}),l=()=>{let e=(0,i.NL)();return(0,n.D)({mutationFn:e=>r.Z.apiKeys.createApiKey(e),onSuccess:()=>{e.invalidateQueries({queryKey:["apiKeys"]})}})},c=()=>{let e=(0,i.NL)();return(0,n.D)({mutationFn:e=>r.Z.apiKeys.deleteApiKey(e),onSuccess:()=>{e.invalidateQueries({queryKey:["apiKeys"]})}})}},54989:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(83464),i=s(64131),n=s(67119);n.Ry({nonce:n.Z_()}),n.Ry({token:n.Z_()});class r{async getNonce(e){return await this.axios.post("/auth/nonce",{address:e})}async verifySignature(e,t){return await this.axios.post("/auth/verify",{address:e,signature:t})}constructor(e){this.axios=e}}class o{async callAgent(e,t,s){return await this.axios.post("/dagent",{requirement_json:e,message:t},{headers:s?{"x-api-key":s}:{}})}async runAgent(e,t){return await this.axios.post("/dagent/".concat(e,"/run"),{message:t})}async createAgent(e){if(console.log("\uD83E\uDD16 AgentModule: createAgent called with data:",e),console.log("\uD83E\uDD16 AgentModule: axios instance:",this.axios),!this.axios)throw Error("Axios instance is not initialized");return await this.axios.post("/dagent/create",e)}async verifyAgent(e,t){return await this.axios.post("/dagent/verify",{deployedUrl:e,default_agent_name:t})}async getAllAgents(){console.log("\uD83E\uDD16 AgentModule: getAllAgents called");let e=await this.axios.get("/dagent/all");return console.log("\uD83E\uDD16 AgentModule: Raw response received",e),e}async getAgent(e){return await this.axios.get("/dagent/".concat(e))}async updateAgent(e,t){return await this.axios.put("/dagent/".concat(e),t)}async deleteAgent(e){return await this.axios.delete("/dagent/".concat(e))}async streamAgent(e,t){let s=await fetch("".concat(this.axios.defaults.baseURL,"/dagent/").concat(e,"/run"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getToken())},body:JSON.stringify({message:t,streaming:!0})});if(!s.body)throw Error("No response body");return s.body}getToken(){var e;return(null===(e=document.cookie.split("; ").find(e=>e.startsWith("access_token=")))||void 0===e?void 0:e.split("=")[1])||localStorage.getItem("access_token")}constructor(e){this.axios=e}}n.Ry({id:n.Z_(),name:n.Z_(),key:n.Z_().optional(),createdAt:n.Z_().optional()});class l{async createApiKey(e){return await this.axios.post("/apikey/create",{name:e})}async getAllApiKeys(){return await this.axios.get("/apikey/all")}async updateApiKey(e){return await this.axios.put("/apikey/update",{api_key_id:e})}async deleteApiKey(e){return await this.axios.delete("/apikey/delete",{data:{api_key_id:e}})}constructor(e){this.axios=e}}class c{static getInstance(){return c.instance||(c.instance=new c),c.instance}setupInterceptors(){this.axiosInstance.interceptors.request.use(e=>{var t;console.log("\uD83D\uDE80 API Request [".concat(null===(t=e.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.url,"]"));let s=this.getAccessToken();return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),this.axiosInstance.interceptors.response.use(e=>{var t;return console.log("\uD83D\uDD25 API Response [".concat(null===(t=e.config.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.config.url,"]:"),e.data),e.data},e=>{var t,s,a,i,n;return console.error("❌ API Error [".concat(null===(s=e.config)||void 0===s?void 0:null===(t=s.method)||void 0===t?void 0:t.toUpperCase()," ").concat(null===(a=e.config)||void 0===a?void 0:a.url,"]:"),(null===(i=e.response)||void 0===i?void 0:i.data)||e.message),(null===(n=e.response)||void 0===n?void 0:n.status)===401&&(this.clearTokens(),window.location.href="/"),Promise.reject(e)})}setTokens(e,t,s){i.Z.set("access_token",e,{expires:7}),localStorage.setItem("access_token",e),t&&(i.Z.set("refresh_token",t,{expires:30}),localStorage.setItem("refresh_token",t)),s&&(i.Z.set("user_id",s,{expires:7}),localStorage.setItem("user_id",s))}clearTokens(){i.Z.remove("access_token"),i.Z.remove("refresh_token"),i.Z.remove("user_id"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_id")}getAccessToken(){return i.Z.get("access_token")||localStorage.getItem("access_token")}getUserId(){return i.Z.get("user_id")||localStorage.getItem("user_id")}constructor(){console.log("\uD83D\uDD27 ApiSdk: Initializing with baseURL:","https://api.dagent.dev"),this.axiosInstance=a.Z.create({baseURL:"https://api.dagent.dev",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors(),this.auth=new r(this.axiosInstance),this.agents=new o(this.axiosInstance),this.apiKeys=new l(this.axiosInstance)}}var d=c.getInstance()}},function(e){e.O(0,[34,262,364,713,667,68,971,117,744],function(){return e(e.s=94785)}),_N_E=e.O()}]);